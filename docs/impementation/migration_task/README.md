# Migration Task List

리스트형 Todo에서 캘린더형 Planner로의 전환을 위한 마이그레이션 작업 목록입니다.

## 개요

단순한 UI 변경을 넘어, **데이터의 연속성과 사용자 경험(UX)을 보장하는 5단계 마이그레이션 전략**입니다.

총 5개의 주요 단계로 구성되어 있으며, 각 단계는 순차적으로 진행됩니다.

## 마이그레이션 전략

### 핵심 목표
- 기존 리스트 기반 할 일 앱을 캘린더 기반 플래너로 전환
- 기존 데이터 호환성 보장 (레거시 데이터 마이그레이션)
- 향상된 UX 제공 (Dialog 기반 입력, 애니메이션, 시각적 피드백)

### 주요 변경사항
1. **데이터 스키마**: `dueDate: Date` 속성 추가
2. **입력 방식**: 인라인 입력 → Dialog 기반 입력
3. **뷰 방식**: 리스트 뷰 → 7열 그리드 캘린더 뷰
4. **인터랙션**: 정적 UI → 애니메이션 및 호버 효과

## 작업 목록

### [Task 1: 데이터 스키마 및 비즈니스 로직 고도화](./task-1-data-schema.md)
**Phase 1: Core Data Layer**

기존 리스트 중심 로직에 '시간' 개념을 주입합니다.
- `types/todo.ts`에 `dueDate: Date` 속성 추가
- Zod 검증 로직에 날짜 필드 추가
- `loadTodos` 함수에 Date 객체 파싱 로직 구현
- 레거시 데이터 마이그레이션 (dueDate 없는 항목 보정)

**주요 고려사항:**
- LocalStorage는 Date 객체를 문자열로 저장하므로 복원 필요
- 기존 데이터 손실 방지를 위한 마이그레이션 로직 필수

---

### [Task 2: 다이얼로그 기반 할 일 추가 시스템](./task-2-dialog-system.md)
**Phase 2: Entry UI**

페이지 상단 입력창을 제거하고, 팝업(Dialog) 형태의 입력 환경을 구축합니다.
- shadcn/ui Dialog, Calendar, Popover 설치
- TodoAddDialog 컴포넌트 개발
  - 내용 입력 (Textarea)
  - 우선순위 선택 (🔴높음, 🟡보통, 🟢낮음)
  - 날짜 선택 (DatePicker)
- 유효성 검사 적용

**Context API 권장:**
할 일 추가 다이얼로그가 여러 곳에서 열려야 하므로, `isDialogOpen`과 `selectedDate` 상태를 Context로 관리하면 프롭 드릴링을 방지할 수 있습니다.

---

### [Task 3: 캘린더 뷰 엔진 구축](./task-3-calendar-engine.md)
**Phase 3: Main UI**

날짜별 할 일을 격자 형태로 시각화합니다.
- date-fns를 이용한 월별 날짜 생성 로직
- TodoCalendar 레이아웃 (7열 그리드)
- 날짜별 데이터 매핑 알고리즘 (useMemo로 최적화)
- 중요도 기반 시각적 배지 (High: Red, Medium: Amber, Low: Green)

**모바일 최적화:**
7열 그리드는 모바일에서 좁으므로, 날짜 칸 내부의 텍스트 대신 '중요도 색상 점(Dot)'으로 표시하고, 클릭 시 상세 내용을 보는 UX를 채택합니다.

**색상 접근성:**
색상으로만 구분하면 색약 사용자가 어려울 수 있으므로, 배지 내부에 아이콘(‼️, ⚠️, ✅)을 병행 표기하는 것이 좋습니다.

---

### [Task 4: 인터랙션 및 애니메이션 고도화](./task-4-interactions.md)
**Phase 4: Motion UI & UX**

Framer Motion을 사용해 캘린더 전환과 사용자 인터랙션을 부드럽게 만듭니다.
- 월 변경 시 좌우 슬라이드 애니메이션
- 날짜 칸 호버 및 클릭 시 미세한 스케일 업 효과
- 할 일 완료 시 취소선 및 투명도 처리
- 캘린더의 특정 날짜 클릭 시 해당 날짜가 미리 선택된 상태로 다이얼로그 열기

---

### [Task 5: 최종 안정성 및 반응형 최적화](./task-5-optimization.md)
**Phase 5: QA & Production Ready**

프로덕션 배포를 위한 최적화 및 테스트
- 테마(다크/라이트)별 캘린더 그리드 및 텍스트 시인성 점검
- 모바일 환경에서의 터치 타겟 크기 확보
- 대량의 할 일(100개 이상)이 있을 경우 성능 테스트
- 크로스 브라우저 호환성 확인
- 접근성 (A11y) 개선

---

## 전문가 조언 (Architecture Tips)

### 1. 데이터 무결성
> `LocalStorage` 마이그레이션 시, `JSON.parse` 이후 `todo.dueDate = new Date(todo.dueDate)` 처리를 잊지 마세요. 이 과정이 없으면 `date-fns` 함수들이 `invalid date` 에러를 발생시킵니다.

### 2. Context API 전환 검토
> 할 일 추가 다이얼로그가 어디서든(헤더, 날짜 칸, 플로팅 버튼) 열려야 하므로, `isDialogOpen` 상태와 `selectedDate` 상태를 별도의 전역 상태(Context)로 관리하면 프롭 드릴링(Prop Drilling)을 방지할 수 있습니다.

### 3. 색상 접근성
> 중요도를 색상으로만 구분하면 색약 사용자가 어려울 수 있습니다. 배지 내부에 아이콘(예: ‼️, ⚠️, ✅)을 병행 표기하는 것이 좋습니다.

## 기술적 잠재 이슈 및 해결 방안

### 데이터 호환성 (Legacy Data)
**문제:** 기존에 저장된 할 일들에는 `dueDate` 필드가 없습니다.

**해결:** 마운트 시 `dueDate`가 없는 데이터에 오늘 날짜 또는 `createdAt`을 기본값으로 주입하는 보정 로직 구현

### 날짜 객체 직렬화
**문제:** `LocalStorage`는 Date 객체를 문자열로 저장합니다.

**해결:** 불러올 때 반드시 `new Date()`로 복원해야 캘린더 로직(isSameDay 등)이 작동

### 모바일 가독성
**문제:** 7열 그리드는 모바일에서 좁습니다.

**해결:** 날짜 칸 내부의 텍스트 대신 '중요도 색상 점(Dot)'으로 표시하고, 클릭 시 상세 내용을 보는 UX 채택

## 진행 가이드

### 순서
1. Task 1부터 순차적으로 진행
2. 각 Task의 체크리스트를 완료
3. "완료 조건" 및 "검증 방법"을 확인 후 다음 단계로

### 중요 마일스톤
- **Task 1 완료 시**: 데이터 구조 전환 완료 (가장 중요한 기초)
- **Task 3 완료 시**: 캘린더 뷰 구현 완료 (주요 기능 완성)
- **Task 5 완료 시**: 프로덕션 레벨 캘린더 플래너 완성

### 개발 팁
- Task 1의 데이터 마이그레이션이 가장 중요 (기존 데이터 손실 방지)
- Task 3까지가 MVP (Minimum Viable Product)
- Task 4-5는 사용자 경험 향상을 위한 추가 레이어
- useMemo/useCallback을 적극 활용하여 성능 최적화
- 컴포넌트 분리 시 React.memo로 불필요한 리렌더링 방지

## 의존성 관계

```
Task 1 (데이터 스키마)
  ↓
Task 2 (Dialog 시스템)
  ↓
Task 3 (캘린더 엔진)
  ↓
Task 4 (애니메이션)
  ↓
Task 5 (최적화)
```

각 단계는 이전 단계에 의존하므로 순서대로 진행해야 합니다.

## 참고 자료

- **원본 계획서**: `docs/plan/migration.md`
- **주요 라이브러리**:
  - date-fns: 날짜 처리
  - Framer Motion: 애니메이션
  - shadcn/ui: UI 컴포넌트
  - Zod: 데이터 검증

---

**위 Task 순서대로 진행하시면 리스트 기반의 앱을 성공적인 캘린더 플래너로 마이그레이션할 수 있습니다.**
